(this.webpackJsonpwhereami=this.webpackJsonpwhereami||[]).push([[0],[,,,,,,,,,,,,function(e,t,n){},,function(e,t,n){},function(e,t,n){},,function(e,t,n){},function(e,t,n){"use strict";n.r(t);var r=n(1),c=n.n(r),a=n(6),u=n.n(a),s=(n(12),n(2)),o=n.n(s),i=n(3),l=n(4),d=n(7),f=n.n(d);function p(){return new Promise((function(e,t){f.a.locate({enableHighAccuracy:!0,timeout:5e3,maximumWait:5e3,maximumAge:0,desiredAccuracy:100,fallbackToIP:!0},(function(n,r){if(n)t(n);else{var c=r.coords,a=c.latitude,u=c.longitude;e({lat:a,lon:u})}}))}))}n(14),n(15);var j=n(0);function h(){return Object(j.jsx)("div",{className:"roundel",type:"underground",children:Object(j.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 100 100",children:[Object(j.jsx)("circle",{className:"roundel-outer-circle",cx:"50",cy:"50",r:"40"}),Object(j.jsx)("circle",{className:"roundel-inner-circle",cx:"50",cy:"50",r:"26"}),Object(j.jsx)("rect",{className:"roundel-rectangle",x:"1",y:"42.5",width:"98",height:"15"}),Object(j.jsx)("div",{className:"roundel-label"})]})})}n(17);function m(e){return b.apply(this,arguments)}function b(){return(b=Object(i.a)(o.a.mark((function e(t){var n,r,c;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="https://api.tfl.gov.uk/StopPoint/?lat=".concat(t.lat,"&lon=").concat(t.lon,"&stopTypes=NaptanMetroStation&radius=1000"),e.prev=1,e.next=4,fetch(n);case 4:return r=e.sent,e.next=7,r.json();case 7:return c=e.sent,e.abrupt("return",v(c.stopPoints.map(x)));case 11:throw e.prev=11,e.t0=e.catch(1),new Error("Couldn't fetch nearest stations");case 14:case"end":return e.stop()}}),e,null,[[1,11]])})))).apply(this,arguments)}function x(e){if(null!=e){var t=e.commonName,n=e.modes;if(null!=t&&null!=n)return{name:t,modes:v(n.map(O))}}return null}function O(e){if("string"!==typeof e)return null;switch(e.toLowerCase()){case"tube":return"Tube";case"overground":return"Overground";case"dlr":return"DLR";default:return null}}function v(e){return e.filter((function(e){return null!=e}))}var g=function(){var e=Object(r.useState)(null),t=Object(l.a)(e,2),n=t[0],c=t[1],a=Object(r.useState)(!1),u=Object(l.a)(a,2),s=u[0],d=u[1],f=Object(r.useState)(!0),b=Object(l.a)(f,2),x=b[0],O=b[1];return Object(r.useEffect)((function(){function e(){return(e=Object(i.a)(o.a.mark((function e(){var t,n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return O(!0),c(null),d(!1),e.next=5,p();case 5:return t=e.sent,e.next=8,m(t);case 8:n=e.sent,c(n[0]),O(!1);case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}try{!function(){e.apply(this,arguments)}()}catch(t){d(!0),O(!1)}}),[]),Object(j.jsx)("div",{className:"App",children:Object(j.jsxs)("header",{className:"App-header",children:[Object(j.jsx)(h,{}),x&&Object(j.jsx)("p",{children:"Loading station information"}),!s&&n&&Object(j.jsxs)("p",{children:[n.name," (",n.modes.join(", "),")"]})]})})},w=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,19)).then((function(t){var n=t.getCLS,r=t.getFID,c=t.getFCP,a=t.getLCP,u=t.getTTFB;n(e),r(e),c(e),a(e),u(e)}))};u.a.render(Object(j.jsx)(c.a.StrictMode,{children:Object(j.jsx)(g,{})}),document.getElementById("root")),w()}],[[18,1,2]]]);
//# sourceMappingURL=main.1d2eca3e.chunk.js.map